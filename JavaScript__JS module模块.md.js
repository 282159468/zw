(self["webpackChunkzw"]=self["webpackChunkzw"]||[]).push([[9315],{5095:function(e,n,t){"use strict";t.r(n);var l=t(7294),o=t(6089),a=t(5659);t(3132);n["default"]=e=>(l.useEffect((()=>{var n;null!==e&&void 0!==e&&null!==(n=e.location)&&void 0!==n&&n.hash&&o.AnchorLink.scrollToAnchor(decodeURIComponent(e.location.hash.slice(1)))}),[]),l.createElement(l.Fragment,null,l.createElement("div",{className:"markdown"},l.createElement("h1",{id:"js-module\u6a21\u5757"},l.createElement(o.AnchorLink,{to:"#js-module\u6a21\u5757","aria-hidden":"true",tabIndex:-1},l.createElement("span",{className:"icon icon-link"})),"JS module(\u6a21\u5757)"),l.createElement("h2",{id:"import\u9759\u6001\u5206\u6790"},l.createElement(o.AnchorLink,{to:"#import\u9759\u6001\u5206\u6790","aria-hidden":"true",tabIndex:-1},l.createElement("span",{className:"icon icon-link"})),"import/\u9759\u6001\u5206\u6790"),l.createElement("p",null,"\u9759\u6001\u5206\u6790\u662f\u6307\u57fa\u4e8e\u6a21\u5757\u7684 import \u58f0\u660e\u5c31\u53ef\u80fd\u786e\u5b9a\u5404\u4e2a\u6a21\u5757\u7684\u4f9d\u8d56\u5173\u7cfb\uff0c\u51fa\u4e8e\u8fd9\u70b9\u53ef\u4ee5\u5b9e\u73b0 Tree Shaking \u53ea\u6253\u5305\u7528\u5230\u7684\u4ee3\u7801"),l.createElement("h2",{id:"export-\u52a8\u6001\u7ed1\u5b9a"},l.createElement(o.AnchorLink,{to:"#export-\u52a8\u6001\u7ed1\u5b9a","aria-hidden":"true",tabIndex:-1},l.createElement("span",{className:"icon icon-link"})),"export \u52a8\u6001\u7ed1\u5b9a"),l.createElement("p",null,"\u52a8\u6001\u7ed1\u5b9a\u7684\u610f\u601d\u662f\u6307\u6a21\u5757\u901a\u8fc7 export \u5bfc\u51fa\u7684\u53d8\u91cf\u4e0e\u8be5\u6a21\u5757\u662f\u7ed1\u5b9a\u5173\u7cfb\uff0c\u5373\u901a\u8fc7\u53d8\u91cf\u53ef\u4ee5\u83b7\u53d6\u53d8\u91cf\u5728\u6a21\u5757\u5185\u7684\u6700\u65b0\u7684\u503c"),l.createElement(a.Z,{code:"// b.js\nexport var foo = 'bar';\nsetTimeout(() => (foo = 'baz'), 500);\n\n// a.js\nimport { foo } from './b.js';\nconsole.log(foo);\nsetTimeout(() => console.log(foo), 100);\n\n// \u8f93\u51fa\u7ed3\u679c\u4e3a\n\n// bar\n// baz",lang:"js"}),l.createElement("h2",{id:"export--as"},l.createElement(o.AnchorLink,{to:"#export--as","aria-hidden":"true",tabIndex:-1},l.createElement("span",{className:"icon icon-link"})),"export * as"),l.createElement("p",null,"ES2020 \u6dfb\u52a0 export * as xxx from 'lib'\u6279\u91cf\u5bfc\u51fa\u58f0\u660e"),l.createElement(a.Z,{code:"const a = 1;\nconst b = 2;\nexport default { a, b };",lang:"js"}),l.createElement(a.Z,{code:"const a = 1;\nconst b = 2;\nexport { a, b };",lang:"js"}),l.createElement("hr",null),l.createElement(a.Z,{code:'<script type="module" src="./a.js"><\/script>',lang:"html"}),l.createElement("p",null,"CommonJS \u5219\u4e0d\u540c\uff0c\u6a21\u5757\u5bfc\u51fa\u503c\u662f\u4e00\u4efd\u62f7\u8d1d\uff0c\u540e\u7eed\u4f7f\u7528\u7684\u503c\u90fd\u5728\u8fd9\u4efd\u62f7\u8d1d\uff0c\u62f7\u8d1d\u7684\u6570\u636e\u4e0e\u6a21\u5757\u4e0d\u518d\u6709\u503c\u7684\u8054\u7cfb\uff0c\u9664\u975e\u6e05\u7a7a\u7f13\u5b58"),l.createElement("h2",{id:"\u5faa\u73af\u4f9d\u8d56"},l.createElement(o.AnchorLink,{to:"#\u5faa\u73af\u4f9d\u8d56","aria-hidden":"true",tabIndex:-1},l.createElement("span",{className:"icon icon-link"})),"\u5faa\u73af\u4f9d\u8d56"),l.createElement("blockquote",null,l.createElement("p",null,l.createElement(o.Link,{to:"https://exploringjs.com/es6/ch_modules.html#sec_cyclic-dependencies-commonjs"},"https://exploringjs.com/es6/ch_modules.html#sec_cyclic-dependencies-commonjs"))),l.createElement("blockquote",null,l.createElement("p",null,l.createElement(o.Link,{to:"http://www.ruanyifeng.com/blog/2015/11/circular-dependency.html"},"http://www.ruanyifeng.com/blog/2015/11/circular-dependency.html"))),l.createElement("p",null,"\u4ece ES \u6807\u51c6\u548c\u962e\u5927\u795e\u4ecb\u7ecd\u6765\u770b\uff0cES \u539f\u751f\u4e5f\u662f\u652f\u6301\u5faa\u73af\u4f9d\u8d56\u7684\uff0c\u800c\u4e14\u5728\u4f7f\u7528 export \u7684\u53d8\u91cf\u65f6\u53ef\u4ee5\u83b7\u53d6\u5230\u76f8\u5e94\u7684\u503c\uff0c\u901a\u8fc7\u793a\u4f8b\u8bd5\u9a8c\u4e86\u4e00\u628a\u786e\u5b9e\u80fd\u53d6\u5230"),l.createElement("p",null,"\u793a\u4f8b\u5730\u5740\uff1a/demo/js-module/\u5faa\u73af\u4f9d\u8d56/index.html"),l.createElement(a.Z,{code:'<script type="module" src="./foo.js"><\/script>',lang:"html"}),l.createElement(a.Z,{code:"// foo.js\nconsole.log('foo\u5f00\u59cb\u6267\u884c');\nimport { bar } from './bar.js';\nconsole.log('bar=', bar);\nexport function foo() {\n  bar();\n  console.log('foo()\u8c03\u7528\u5b8c\u6bd5');\n}\nfoo();\n\n// bar.js\nconsole.log('bar\u5f00\u59cb\u6267\u884c');\nimport { foo } from './foo.js';\nconsole.log('foo=', foo);\nexport function bar() {\n  console.log('bar()\u8c03\u7528\u5b8c\u6bd5');\n}\nconsole.log('bar\u7ed3\u675f\u6267\u884c');",lang:"js"}),l.createElement("p",null,"\u4ee5\u4e0a\u4ee3\u7801\u80fd\u6b63\u5e38\u6267\u884c\u8f93\u51fa\u7ed3\u679c\u5982\u4e0b"),l.createElement(a.Z,{code:"bar\u5f00\u59cb\u6267\u884c\nfoo= \u0192 foo() {\n    bar();\n    console.log('foo()\u8c03\u7528\u5b8c\u6bd5');\n}\nbar\u7ed3\u675f\u6267\u884c\nfoo\u5f00\u59cb\u6267\u884c\nbar= \u0192 bar() {\n  console.log('bar()\u8c03\u7528\u5b8c\u6bd5');\n}\nbar()\u8c03\u7528\u5b8c\u6bd5\nfoo()\u8c03\u7528\u5b8c\u6bd5",lang:"unknown"}),l.createElement("p",null,"\u4f46\u662f\u5982\u679c\u628a foo \u6362\u6210\u53d8\u91cf\uff0c\u4e5f\u5c31\u662f\u53bb\u6389\u63d0\u524d\u51fd\u6570\u58f0\u660e\uff0c\u5728 bar \u5c31\u4f1a\u62a5\u9519 foo \u672a\u521d\u59cb\u5316"),l.createElement("ul",{className:"contains-task-list"},l.createElement("li",{className:"task-list-item"},l.createElement("input",{type:"checkbox",disabled:!0})," \u8fd9\u70b9\u4e0d\u77e5\u9053\u662f\u6d4f\u89c8\u5668\u5b9e\u73b0 ES \u7684\u95ee\u9898\u8fd8\u662f\u53e6\u6709\u539f\u56e0\uff0cbabel-node \u8bd5\u4e0b")),l.createElement(a.Z,{code:"export const foo = () => {\n  bar();\n  console.log('foo()\u8c03\u7528\u5b8c\u6bd5');\n};",lang:"js"}),l.createElement("h2",{id:"\u52a8\u6001\u52a0\u8f7dimport"},l.createElement(o.AnchorLink,{to:"#\u52a8\u6001\u52a0\u8f7dimport","aria-hidden":"true",tabIndex:-1},l.createElement("span",{className:"icon icon-link"})),"\u52a8\u6001\u52a0\u8f7d/import()"),l.createElement("p",null,l.createElement("strong",null,"webpack")),l.createElement("p",null,"webpack \u5f88\u65e9\u524d\u5e94\u8be5\u662f 1.x \u7248\u672c\uff0c\u5c31\u53ef\u4ee5\u901a\u8fc7 require.ensure \u5f62\u5f0f\u5b9e\u73b0\u8fd0\u884c\u65f6\u52a0\u8f7d\uff08\u52a8\u6001\u52a0\u8f7d\uff09"),l.createElement("p",null,"\u4ee5\u53ca 2.x import()\u51fd\u6570"),l.createElement(a.Z,{code:"if (module.hot) {\n  import('lodash').then(_ => {\n    // Do something with lodash (a.k.a '_')...\n  });\n}",lang:"js"}),l.createElement("p",null,l.createElement("strong",null,"ES \u6a21\u5757")),l.createElement("p",null,"ES import \u4e3a\u9759\u6001\u5bfc\u5165\u5f62\u5f0f\u4e0d\u652f\u6301\u52a8\u6001\u52a0\u8f7d\uff0c\u4f46\u662f ES2020"),l.createElement("p",null,"\u6709\u52a8\u6001\u52a0\u8f7d\u7684\u63d0\u6848 ",l.createElement(o.Link,{to:"https://github.com/tc39/proposal-dynamic-import"},"https://github.com/tc39/proposal-dynamic-import")),l.createElement(a.Z,{code:"const main = document.querySelector('main');\nfor (const link of document.querySelectorAll('nav > a')) {\n  link.addEventListener('click', e => {\n    e.preventDefault();\n    import(`./section-modules/${link.dataset.entryModule}.js`)\n      .then(module => {\n        module.loadPageInto(main);\n      })\n      .catch(err => {\n        main.textContent = err.message;\n      });\n  });\n}",lang:"js"}),l.createElement("p",null,'\u7528\u6cd5\u548c webpack \u7684\u5f88\u50cf\uff0c\u4f46 webpack \u4e0d\u4ec5\u8981\u52a8\u6001\u52a0\u8f7d\uff0c\u8fd8\u8981\u5b9e\u73b0\u6587\u4ef6"\u9759\u6001"\u6253\u5305\uff0c'),l.createElement("p",null,"\u5982 import(",l.createElement("code",null,"./b/$","{","a","}"),")\u6253\u5305\u5c31\u9700\u8981\u628a b \u76ee\u5f55\u4e0b\u7684\u6587\u4ef6\u5168\u6253\u5305\uff0c\u7136\u540e\u5728\u8fd0\u884c\u65f6\u901a\u8fc7\u8ba1\u7b97\u8def\u5f84\u6700\u7ec8\u503c\u518d\u52a0\u8f7d\u5bf9\u5e94\u6587\u4ef6"),l.createElement("p",null,"\u6240\u4ee5 import(a)\u5728 webpack \u4e2d\u662f\u4e0d\u884c\u7684\uff0c\u8def\u5f84\u4e2d\u5fc5\u9700\u5305\u542b\u4e00\u90e8\u5206\u9759\u6001\u76ee\u5f55\u4fe1\u606f"),l.createElement("p",null,"\u53e6\u5916\u8fd8\u53ef\u4ee5\u7528 webpack \u9b54\u6cd5\u6ce8\u91ca\u8fdb\u4e00\u6b65\u63a7\u5236\u6253\u5305\u8303\u56f4"),l.createElement(a.Z,{code:'import(\n  /* webpackInclude: /\\.json$/ */\n  /* webpackExclude: /\\.noimport\\.json$/ */\n  /* webpackChunkName: "my-chunk-name" */\n  `./locale/${language}`\n);',lang:"js"}),l.createElement("h2",{id:"webpack-\u6a21\u5757"},l.createElement(o.AnchorLink,{to:"#webpack-\u6a21\u5757","aria-hidden":"true",tabIndex:-1},l.createElement("span",{className:"icon icon-link"})),"webpack \u6a21\u5757"),l.createElement("p",null,"webpack \u8ba9\u6a21\u5757\u66f4\u7b80\u5355\uff0c\u4e5f\u66f4\u590d\u6742"),l.createElement("p",null,"\u7ecf\u5e38\u5728 webpack \u5e94\u7528\u5199\u7684 ES \u6a21\u5757\u8bed\u6cd5\u5982 import/export\uff0c\u8fd9\u4e9b\u8bed\u53e5\u6253\u5305\u540e\u5e76\u4e0d\u4f1a\u51fa\u73b0\u5728\u6d4f\u89c8\u5668\u7aef\uff0c\u6700\u7ec8\u4f1a\u8f6c\u6362\u6210 ES5 \u8bed\u6cd5\uff0c\u5927\u6982\u7ecf\u5386\u7684\u6b65\u9aa4"),l.createElement(a.Z,{code:"export function a() {}\nexport default 'zw';",lang:"js"}),l.createElement("ol",null,l.createElement("li",null,"\u901a\u8fc7 babel \u628a ES \u6a21\u5757 \u8f6c\u6362\u4e3a Node \u7684 CommonJS")),l.createElement(a.Z,{code:"exports.a = a;\nexports.default = a;\nexports.__esModule = true;",lang:"js"}),l.createElement("blockquote",null,l.createElement("p",null,"__esModule \u6807\u8bc6\u8be5\u6a21\u5757\u662f\u901a\u8fc7 ES \u6a21\u5757\u8f6c\u5316\u4e3a CMD \u6a21\u5757\u7684\uff0c\u540c\u6837\u7684 import \u4e5f\u4f1a\u8f6c\u6362\u4e3a require\uff0c")),l.createElement("p",null,'\u56e0\u4e3a\u5728 NodeJS \u4e2d\u8981\u52a0\u8f7d ES \u6a21\u5757\u6709\u4e09\u79cd\u65b9\u6cd5\uff0c\u7b2c\u4e00\u79cd babel \u8f6c\u6362\u3001package.json \u4e2d\u58f0\u660e type:"module"\u3001--input-type \u53c2\u6570'),l.createElement("p",null,l.createElement(o.Link,{to:"https://nodejs.org/api/esm.html"},"https://nodejs.org/api/esm.html")),l.createElement("ol",{start:2},l.createElement("li",null,l.createElement("p",null,"\u901a\u8fc7 NodeJS require \u52a0\u8f7d babel \u8f6c\u6362\u540e\u7684\u6587\u4ef6")),l.createElement("li",null,l.createElement("p",null,"\u518d\u8f6c\u6362\u4e3a webapck \u5b9e\u73b0\u7684\u6a21\u5757",l.createElement("strong",null,"webpack_require")))),l.createElement("p",null,"\u5f53\u7136\u73b0\u5728\u4e5f\u6709\u652f\u6301\u539f\u751f\u6a21\u5757\u6253\u5305\u7684\u5de5\u5177\uff0c\u4f46 webpack \u7c7b\u6253\u5305\u4f9d\u7136\u6709\u597d\u5904\u6bd4\u5982 Tree Shaking\uff0c"),l.createElement("p",null,"\u6253\u5305\u4e3a\u5355\u4e2a\u6587\u4ef6\u540e\u51cf\u5c11\u52a0\u8f7d\u6a21\u5757\u7684\u8bf7\u6c42\u6b21\u6570\uff0c\u867d\u7136 HTTP/2 \u7684\u591a\u8def\u590d\u7528\u53ef\u80fd\u4e00\u5b9a\u7a0b\u5ea6\u89e3\u51b3\u8fd9\u4e2a\u95ee\u9898\uff0c\u4f46\u6a21\u5757\u6570\u91cf\u592a\u591a\u4e5f\u4f1a\u51fa\u73b0\u6027\u80fd\u95ee\u9898"))))}}]);