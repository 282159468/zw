(self["webpackChunkzw"]=self["webpackChunkzw"]||[]).push([[9540],{94131:function(e,n,l){"use strict";l.r(n);var t=l(67294),r=l(96089),o=l(65659);l(53132);n["default"]=e=>(t.useEffect((()=>{var n;null!==e&&void 0!==e&&null!==(n=e.location)&&void 0!==n&&n.hash&&r.AnchorLink.scrollToAnchor(decodeURIComponent(e.location.hash.slice(1)))}),[]),t.createElement(t.Fragment,null,t.createElement("div",{className:"markdown"},t.createElement("h2",{id:"\u4ec0\u4e48\u662f-promise"},t.createElement(r.AnchorLink,{to:"#\u4ec0\u4e48\u662f-promise","aria-hidden":"true",tabIndex:-1},t.createElement("span",{className:"icon icon-link"})),"\u4ec0\u4e48\u662f Promise"),t.createElement("p",null,t.createElement("code",null,"Promise"),"\u662f\u5f02\u6b65\u7f16\u7a0b\u7684\u4e00\u79cd\u89e3\u51b3\u65b9\u6848\uff0c\u76f8\u6bd4\u56de\u8c03 Promise \u5bf9\u672a\u6765\u503c\u8fdb\u884c\u4e86\u63a7\u5236\u53cd\u8f6c\uff0c\u8ba9\u672a\u6765\u503c\u548c\u8c03\u7528\u4ee3\u7801\u4e00\u8d77"),t.createElement("h2",{id:"promise-\u89e3\u51b3\u4e86\u4ec0\u4e48\u95ee\u9898"},t.createElement(r.AnchorLink,{to:"#promise-\u89e3\u51b3\u4e86\u4ec0\u4e48\u95ee\u9898","aria-hidden":"true",tabIndex:-1},t.createElement("span",{className:"icon icon-link"})),"Promise \u89e3\u51b3\u4e86\u4ec0\u4e48\u95ee\u9898"),t.createElement("p",null,t.createElement("code",null,"Promise"),"\u4e3b\u8981\u89e3\u51b3\u56de\u8c03\u5f02\u6b65\u7f16\u7a0b\u7684\u4fe1\u4efb\u95ee\u9898"),t.createElement("ul",null,t.createElement("li",null,"\u56de\u8c03\u5730\u72f1"),t.createElement("li",null,"\u56de\u8c03\u65f6\u673a\u4e0d\u786e\u5b9a\uff0c\u4f20\u5165\u56de\u8c03\u7684\u51fd\u6570\u53ef\u80fd\u540c\u6b65\u6216\u8005\u5f02\u6b65\u8c03\u7528\u56de\u8c03")),t.createElement(o.Z,{code:"foo(1, function(){});\nfunction(num, cb){\n    setTimout(()=>cb('done'), 1000)\n}",lang:"js"}),t.createElement("ul",null,t.createElement("li",null,"\u56de\u8c03\u4e0d\u786e\u5b9a\uff0c\u6709\u53ef\u80fd\u4f20\u5165\u7684\u56de\u8c03\u6c38\u8fdc\u4e0d\u4f1a\u6267\u884c\uff0c\u800c",t.createElement("code",null,"Promise"),"\u7684\u56de\u8c03\u4f1a\u5728\u4e0b\u4e00\u4e2a",t.createElement("code",null,"tick"),"\u89e6\u53d1"),t.createElement("li",null,"\u56de\u8c03\u53c2\u6570\u548c",t.createElement("code",null,"this"),"\u4e0a\u4e0b\u6587\u4e0d\u53ef\u4fe1\uff0ccb.call(obj, a, b, ...)\uff0c",t.createElement("code",null,"Promise"),"\u4e0d\u7ba1\u662f",t.createElement("code",null,"resolve"),"\u3001",t.createElement("code",null,"reject"),"\u4f20\u5165\u53c2\u6570\u90fd\u662f\u4e00\u4e2a\uff0c",t.createElement("code",null,"this"),"\u4e3a\u5168\u5c40\u5bf9\u8c61",t.createElement("code",null,"window")),t.createElement("li",null,"\u541e\u6389\u5f02\u5e38\u548c\u9519\u8bef")),t.createElement("p",null,"\u4e0b\u9762\u7684",t.createElement("code",null,"foo"),"\u53ef\u80fd\u662f\u540c\u4e8b\u7f16\u5199\u7684\u51fd\u6570\uff0c\u4e5f\u53ef\u80fd\u662f\u7b2c\u4e09\u65b9\u63d0\u4f9b\u7684\uff0c",t.createElement("code",null,"b.a();"),"\u5bfc\u81f4\u5f02\u5e38\u540e\u56de\u8c03",t.createElement("code",null,"cb"),"\u6839\u672c\u4e0d\u4f1a\u6267\u884c\uff0c\u5916\u90e8\u4e5f\u6355\u83b7\u4e0d\u5230\u5f02\u5e38"),t.createElement(o.Z,{code:"try {\n  foo(1, function(data) {\n    console.log(data);\n  });\n} catch (err) {\n  alert(err);\n}\nfunction foo(num, cb) {\n  try {\n    // ...\n    b.a();\n    cb(2);\n  } catch (err) {\n    console.error(err);\n  }\n}",lang:"js"}),t.createElement("p",null,"\u53e6\u5916\u4e00\u79cd\u5c31\u662f\u7b2c\u4e09\u65b9\u4ee3\u7801\u6ca1\u6709\u5f02\u5e38\uff0c\u56de\u8c03\u91cc\u9762\u6709\u5f02\u5e38\u3002"),t.createElement(o.Z,{code:"try {\n  foo(1, function(data) {\n    b.a();\n    console.log(data);\n  });\n} catch (err) {\n  alert(err);\n}\nfunction foo(num, cb) {\n  try {\n    // ...\n    cb(2);\n  } catch (err) {}\n}",lang:"js"}),t.createElement("p",null,"\u4e0d\u7ba1\u54ea\u79cd\u60c5\u51b5\u90fd\u662f\u7b2c\u4e09\u65b9\u628a\u5f02\u5e38\u541e\u6389\u4e86\uff0c\u4e4b\u524d\u5c31\u78b0\u5230\u8fc7\u4e00\u6b21\u4f7f\u7528\u4e00\u4e2a\u7b2c\u4e09\u65b9\u63d2\u4ef6\u9875\u9762\u6ca1\u6709\u4efb\u4f55\u63d0\u793a\uff0c\u4e5f\u6ca1\u6709\u5f02\u5e38\u4fe1\u606f\u6b7b\u6d3b\u5b9a\u4f4d\u4e0d\u5230\u95ee\u9898\u3002\u6700\u540e\u597d\u4e0d\u5bb9\u6613\u627e\u5230\u7b2c\u4e09\u65b9\u4ee3\u7801\u91cc\u9762",t.createElement("code",null,"catch (err) ","{","}"),"\u6355\u83b7\u4e86\u5f02\u5e38\u7136\u540e\u5565\u4e5f\u6ca1\u5e72\uff0c\u597d\u6b79\u4e5f\u6253\u4e2a",t.createElement("code",null,"console"),"\u5427~~~"),t.createElement("h2",{id:"thenable-\u5bf9\u8c61"},t.createElement(r.AnchorLink,{to:"#thenable-\u5bf9\u8c61","aria-hidden":"true",tabIndex:-1},t.createElement("span",{className:"icon icon-link"})),"thenable \u5bf9\u8c61"),t.createElement("p",null,"\u9e2d\u5f0f\u8fa8\u578b,\u5177\u6709",t.createElement("code",null,"then"),"\u65b9\u6cd5\u7684\u5bf9\u8c61\uff0cthenable \u5bf9\u8c61"),t.createElement(o.Z,{code:"var obj = {\n  then: (cb, fail) => cb(2),\n};\n// \u8f93\u51fa2\nPromise.resolve(obj).then(data => console.log(data));\n\nvar obj = {\n  then: (cb, fail) => fail(3),\n};\n// \u5e76\u4e0d\u4f1a\u6267\u884ccatch\nPromise.reject(obj).catch(err => console.log('reject', err));\n// \u8f93\u51faresolve 3\nPromise.resolve(obj).catch(err => console.log('resolve', err));",lang:"js"}),t.createElement("h2",{id:"promiseresolve"},t.createElement(r.AnchorLink,{to:"#promiseresolve","aria-hidden":"true",tabIndex:-1},t.createElement("span",{className:"icon icon-link"})),"Promise.resolve()"),t.createElement("p",null,t.createElement("code",null,"Promise.resolve()"),"\u7684\u8fd4\u56de\u503c\u662f\u5bf9\u4f20\u5165\u53c2\u6570\u7684",t.createElement("code",null,"promise"),"\u5305\u88c5\uff0c\u53ef\u4ee5\u5305\u88c5\u56fa\u5b9a\u503c\u3001promise \u5bf9\u8c61\u3001thenable \u5bf9\u8c61"),t.createElement("p",null,t.createElement("code",null,"Promise.resolve()"),"\u51b3\u8bae\u662f\u53ef\u4ee5\u662f\u5b8c\u6210\u6216\u8005\u62d2\u7edd\u3001\u800c",t.createElement("code",null,"Promise.reject()"),"\u53ea\u80fd\u662f\u62d2\u7edd"),t.createElement(o.Z,{code:"var p = Promise.reject(`no`);\nPromise.resolve(p).then(\n  result => console.log(result),\n  // \u8f93\u51fano\n  reason => console.log(reason),\n);",lang:"js"}),t.createElement("h2",{id:"\u5f02\u5e38"},t.createElement(r.AnchorLink,{to:"#\u5f02\u5e38","aria-hidden":"true",tabIndex:-1},t.createElement("span",{className:"icon icon-link"})),"\u5f02\u5e38"),t.createElement("h3",{id:"onrejected"},t.createElement(r.AnchorLink,{to:"#onrejected","aria-hidden":"true",tabIndex:-1},t.createElement("span",{className:"icon icon-link"})),"onRejected"),t.createElement("p",null,t.createElement("code",null,"onRejected"),"\u4e0d\u80fd\u6355\u83b7",t.createElement("code",null,"onFulfilled"),"\u4e2d\u7684\u5f02\u5e38"),t.createElement(o.Z,{code:"var p = Promise.resolve(1);\np.then(\n  function onFulfilled(result) {\n    foo.bar();\n    return 2;\n  },\n  // \u4e0d\u4f1a\u6267\u884c\n  function onRejected(reason) {\n    console.log(reason);\n  },\n);",lang:"js"}),t.createElement("p",null,"\u539f\u56e0\u662f",t.createElement("code",null,"Promise"),"\u72b6\u6001\u51b3\u8bae\u540e\u4e0d\u80fd\u7406\u53d8\u66f4\uff0cp \u662f\u4e00\u4e2a\u7acb\u5373\u51b3\u8bae\u4e3a\u5b8c\u6210\u7684\u5b9e\u4f8b\uff0c\u6240\u4ee5\u4f1a\u8fdb\u5165 then \u56de\u8c03\uff0c\u867d\u7136\u51fd\u6570\u5185\u4ea7\u751f\u4e86\u5f02\u5e38\uff0c\u4f46\u662f p \u5df2\u7ecf\u51b3\u8bae\uff0c\u81ea\u7136\u4e0d\u4f1a\u89e6\u53d1 onRejected\uff0c\u901a\u5e38\u4f7f\u7528 catch \u5904\u7406\u5f02\u5e38\u66f4\u7a33\u59a5"),t.createElement("h3",{id:"\u5f02\u5e38\u91cd\u7f6e"},t.createElement(r.AnchorLink,{to:"#\u5f02\u5e38\u91cd\u7f6e","aria-hidden":"true",tabIndex:-1},t.createElement("span",{className:"icon icon-link"})),"\u5f02\u5e38\u91cd\u7f6e"),t.createElement("p",null,"\u4ee5\u524d\u5199\u8fc7\u7c7b\u4f3c\u7684\u4ee3\u7801"),t.createElement(o.Z,{code:"// api\u8bf7\u6c42\u5de5\u5177\nfunction ajax(url) {\n  // ...\n  return Promise.reject(`404`);\n}\nfunction request(url) {\n  return ajax(url)\n    .then(res => {\n      // ....\n    })\n    .catch(err => {\n      alert('\u8bf7\u6c42\u51fa\u9519\u5566\uff01');\n      return err;\n    });\n}\n\n// \u8c03\u7528\u7aef\nrequest('http://zw.com/age')\n  .then(res => {\n    console.log(`haha`, res);\n  })\n  .catch(err => {\n    console.log('\u83b7\u53d6\u5e74\u9f84\u5931\u8d25', err);\n  });",lang:"js"}),t.createElement("p",null,'\u5b9e\u73b0\u7684\u5927\u4f53\u529f\u80fd\u662f request \u51fd\u6570\u4f1a\u7edf\u4e00\u5904\u7406 ajax \u7684\u5f02\u5e38\u4fe1\u606f\uff0c\u540c\u65f6\u9700\u8981\u901a\u8fc7\u8c03\u7528\u7aef\uff0c\u8c03\u7528\u7aef\u53ef\u80fd\u4e3a\u5bf9\u5f02\u5e38\u518d\u6b21\u5904\u7406\uff0c\u4f46\u662f\u8fd9\u91cc\u8c03\u7528\u7aef\u7684 catch \u6c38\u8fdc\u4e5f\u4e0d\u4f1a\u6267\u884c\uff0c\u53cd\u800c\u8c03\u7528\u7aef then \u8f93\u51fa\u4e86"haha 404"\u3002\u51fa\u73b0\u8be5\u60c5\u51b5\u7684\u539f\u56e0\u662f catch \u4f1a\u91cd\u7f6e\u5f53\u524d promise \u94fe\u4e3a\u5b8c\u6210\u72b6\u6001\uff0c\u6240\u4ee5 catch \u8fd4\u56de\u4e00\u4e2a\u65b0\u7684 promise \u4ea7\u751f\u65b0\u7684\u94fe\u5c31\u53ef\u4ee5\u89e3\u51b3\u8be5\u95ee\u9898'),t.createElement(o.Z,{code:"// api\u8bf7\u6c42\u5de5\u5177\nfunction ajax(url) {\n  // ...\n  return Promise.reject(`404`);\n}\nfunction request(url) {\n  return ajax(url)\n    .then(res => {\n      // ....\n    })\n    .catch(err => {\n      alert('\u8bf7\u6c42\u51fa\u9519\u5566\uff01');\n      return Promise.reject(err);\n    });\n}\n\n// \u8c03\u7528\u7aef\nrequest('http://zw.com/age')\n  .then(res => {\n    console.log(`haha`, res);\n  })\n  // \u6b63\u5e38\u8f93\u51fa\n  .catch(err => {\n    console.log('\u83b7\u53d6\u5e74\u9f84\u5931\u8d25', err);\n  });",lang:"js"}),t.createElement("p",null,"\u6216\u8005\u5728\u5916\u9762\u5305\u4e00\u5c42"),t.createElement(o.Z,{code:"// api\u8bf7\u6c42\u5de5\u5177\nfunction ajax(url) {\n  // ...\n  return Promise.reject(`404`);\n}\nfunction request(url) {\n  return new Promise((resolve, reject) => {\n    return ajax(url)\n      .then(res => {\n        // ....\n      })\n      .catch(err => {\n        alert('\u8bf7\u6c42\u51fa\u9519\u5566\uff01');\n        return reject(err);\n      });\n  });\n}\n\n// \u8c03\u7528\u7aef\nrequest('http://zw.com/age')\n  .then(res => {\n    console.log(`haha`, res);\n  })\n  // \u6b63\u5e38\u8f93\u51fa\n  .catch(err => {\n    console.log('\u83b7\u53d6\u5e74\u9f84\u5931\u8d25', err);\n  });",lang:"js"}),t.createElement("h3",{id:"\u9ed8\u8ba4\u7684\u5f02\u5e38-hanlder"},t.createElement(r.AnchorLink,{to:"#\u9ed8\u8ba4\u7684\u5f02\u5e38-hanlder","aria-hidden":"true",tabIndex:-1},t.createElement("span",{className:"icon icon-link"})),"\u9ed8\u8ba4\u7684\u5f02\u5e38 hanlder"),t.createElement("p",null,"\u5982\u679c\u5f02\u5e38\u6ca1\u6709\u88ab\u5904\u7406\uff0c\u4f1a\u4e00\u76f4\u4f20\u9012\u4e0b\u53bb\u76f4\u5230 catch \u6216\u8005 onRejected"),t.createElement(o.Z,{code:"var p = new Promise((resolve, reject) => reject('\u51fa\u9519\u5566\uff01'));\np.then(\n  // \u53ea\u5b9a\u4e49\u4e86\u5b8c\u6210\u5904\u7406\u51fd\u6570\n  () => console.log('Fulfilled'),\n  // \u6ca1\u6709\u5b9a\u4e49onRejected\uff0c\u4f46\u6709\u7c7b\u4f3c\u8fd9\u6837\u7684\u9ed8\u8ba4\u5f02\u5e38\u5904\u7406\u51fd\u6570\n  err => {\n    throw new Error(err + 2);\n  },\n)\n  .then(function(v) {\n    return v * 2;\n  })\n  // \u5373\u4f7f\u524d\u4e00\u4e2athen\u4e5f\u6ca1\u5904\u7406\u5f02\u5e38\uff0c\u8fd9\u91cc\u8fd8\u662f\u80fd\u6355\u83b7\u5230\n  .catch(err => console.log('\u5904\u7406\u5f02\u5e38', err));",lang:"js"}),t.createElement("p",null,"\u5982\u679c\u4e0d\u663e\u793a\u58f0\u660e onFulfilled \u51fd\u6570\uff0c\u5176\u884c\u4e3a\u548c onRejected \u7c7b\u4f3c"),t.createElement("h3",{id:"\u65e0\u6b62\u5c3d\u7684-catch"},t.createElement(r.AnchorLink,{to:"#\u65e0\u6b62\u5c3d\u7684-catch","aria-hidden":"true",tabIndex:-1},t.createElement("span",{className:"icon icon-link"})),"\u65e0\u6b62\u5c3d\u7684 catch"),t.createElement("p",null,"\u4e0d\u7ba1\u662f then \u7684 onRejected \u8fd8\u662f catch \u51fd\u6570\u81ea\u8eab\u90fd\u6709\u53ef\u80fd\u51fa\u73b0\u5f02\u5e38\uff0c\u8981\u5904\u7406\u8fd9\u90e8\u5206\u5f02\u5e38\u662f\u65e0\u6b62\u5c3d\u7684"),t.createElement(o.Z,{code:"var p = new Promise((resolve, reject) => reject('\u51fa\u9519\u5566\uff01'));\np.then().catch(err => {\n  a.b();\n  console.log('\u5904\u7406\u5f02\u5e38', err);\n});",lang:"js"}),t.createElement("p",null,"catch \u672c\u6765\u662f\u4e3a\u4e86\u6355\u83b7 reject \u62d2\u7edd\u4fe1\u606f\u7684\uff0c\u4f46\u81ea\u8eab\u53c8\u51fa\u73b0\u5f02\u5e38\uff0c\u800c\u8981\u6355\u83b7\u8fd9\u90e8\u5206\u5f02\u5e38\u9700\u8981\u5728\u540e\u9762\u6dfb\u52a0.catch()\uff0c\u89e3\u51b3\u65b9\u6cd5"),t.createElement("ul",null,t.createElement("li",null,"queryObjects"),t.createElement("li",null,"\u81ea\u5b9a\u4e49\u5b9e\u73b0 defer")),t.createElement("h3",{id:"\u5168\u5c40\u6355\u83b7"},t.createElement(r.AnchorLink,{to:"#\u5168\u5c40\u6355\u83b7","aria-hidden":"true",tabIndex:-1},t.createElement("span",{className:"icon icon-link"})),"\u5168\u5c40\u6355\u83b7"),t.createElement("h3",{id:"\u6784\u9020\u5f02\u5e38"},t.createElement(r.AnchorLink,{to:"#\u6784\u9020\u5f02\u5e38","aria-hidden":"true",tabIndex:-1},t.createElement("span",{className:"icon icon-link"})),"\u6784\u9020\u5f02\u5e38"),t.createElement("p",null,"new Promise(fn)\u53c2\u6570 fn \u51fd\u6570\u5185\u90e8\u7684\u5f02\u5e38\u662f\u53ef\u4ee5\u88ab\u6355\u83b7\u7684\uff0c\u4f46\u4f20\u9012\u9519\u8bef\u7684\u53c2\u6570\u4e0d\u80fd\u6355\u83b7\uff0c\u53ef\u4ee5\u4e3a\u521b\u5efa promise \u90fd\u5931\u8d25\u4e86\u4f55\u6765\u7684 catch \u548c then"),t.createElement(o.Z,{code:"var p = new Promise((resolve, reject) => {\n  a.b();\n}).catch(err => console.log(err));",lang:"js"}),t.createElement(o.Z,{code:"var p = new Promise([]).catch(err => console.log(err));",lang:"js"}),t.createElement("h2",{id:"promise-\u94fe"},t.createElement(r.AnchorLink,{to:"#promise-\u94fe","aria-hidden":"true",tabIndex:-1},t.createElement("span",{className:"icon icon-link"})),"promise \u94fe"),t.createElement("p",null,"then \u548c catch \u5904\u7406\u51fd\u6570\u7684\u8fd4\u56de\u503c\u5982\u679c\u662f promise\uff0c\u5728\u540e\u7eed\u56de\u8c03\u4e2d\u63a5\u6536\u7684\u503c\u4e0d\u662f\u8be5 promise\uff0c\u800c\u8be5 promise \u51b3\u8bae\u540e\u7684\u503c"),t.createElement(o.Z,{code:"var p = new Promise((resolve, reject) => {\n  reject(1);\n})\n  .catch(err => Promise.reject(2))\n  .catch(err => {\n    // \u8f93\u51fa2\n    console.log(err);\n    return 3;\n  })\n  .then(v => {\n    // \u8f93\u51fa3\uff0c\u4e0a\u4e00\u6b65\u7684catch\u91cd\u7f6e\u4e86\u5f53\u524dpromise\u94fe\u4e3a\u5b8c\u6210\u72b6\u6001\n    // \u7b2c\u4e00catch\u6ca1\u6709\u201c\u91cd\u7f6e\u201d\u662f\u56e0\u4e3a\u8fd4\u56de\u4e86\u65b0promise\u6539\u53d8\u4e86\u5f53\u524dpromise,\u5176\u5b9e\u4ed6\u91cd\u7f6e\u7684promise\u5bf9\u8c61\u662fp\n    console.log(v);\n    return Promise.resolve(4);\n  });",lang:"js"}),t.createElement("h2",{id:"resolve-\u548c-reject"},t.createElement(r.AnchorLink,{to:"#resolve-\u548c-reject","aria-hidden":"true",tabIndex:-1},t.createElement("span",{className:"icon icon-link"})),"resolve \u548c reject"),t.createElement("ul",null,t.createElement("li",null,"\u4e24\u8005\u53ef\u4ee5\u4f20\u5165 promise"),t.createElement("li",null,"resolve \u8868\u793a",t.createElement("strong",null,"\u51b3\u8bae"),"\uff0c\u5373\u8fd4\u56de\u7684\u7ed3\u679c\u53ef\u80fd\u662f\u5b8c\u6210\u4e5f\u53ef\u4ee5\u662f\u62d2\u7edd\uff0c\u800c reject \u662f\u5b9a\u662f\u62d2\u7edd")),t.createElement(o.Z,{code:"Promise.resolve(Promise.reject()); // \u62d2\u7edd\nPromise.resolve(); // \u5b8c\u6210\nPromise.reject(Promise.resolve()); // \u62d2\u7edd",lang:"js"}),t.createElement("h2",{id:"promisealliterable--promiseraceiterable--promiseallsettlediterable"},t.createElement(r.AnchorLink,{to:"#promisealliterable--promiseraceiterable--promiseallsettlediterable","aria-hidden":"true",tabIndex:-1},t.createElement("span",{className:"icon icon-link"})),"Promise.all(iterable) / Promise.race(iterable) / Promise.allSettled(iterable)"),t.createElement("h3",{id:"\u76f8\u540c\u70b9"},t.createElement(r.AnchorLink,{to:"#\u76f8\u540c\u70b9","aria-hidden":"true",tabIndex:-1},t.createElement("span",{className:"icon icon-link"})),"\u76f8\u540c\u70b9"),t.createElement("ul",null,t.createElement("li",null,"\u4f20\u5165\u53c2\u6570\u90fd\u53ef\u8fed\u4ee3\u5bf9\u8c61\u5982\u6570\u7ec4\uff0c\u6216\u8005\u662f\u7acb\u5373\u503c"),t.createElement("li",null,"\u628a\u4f20\u5165\u6bcf\u4e2a\u6210\u5458\u901a\u8fc7 Promise.resolve()\u8f6c\u5316\u4e3a\u771f\u6b63\u7684 promise \u5bf9\u8c61")),t.createElement("h3",{id:"all"},t.createElement(r.AnchorLink,{to:"#all","aria-hidden":"true",tabIndex:-1},t.createElement("span",{className:"icon icon-link"})),"all"),t.createElement("p",null,"\u5f53\u6240\u6709 promise \u51b3\u8bae\u4e86\uff0c\u5982\u679c\u6240\u6709\u51b3\u8bae\u662f\u5b8c\u6210\u7684\uff0c\u6700\u540e\u8fd4\u56de\u72b6\u6001\u4e3a\u5b8c\u6210\u7684 promise\uff1b\u5982\u679c\u4efb\u4e00 promise \u51b3\u8bae\u4e3a\u5931\u8d25\uff0c\u6700\u7ec8\u8fd4\u56de\u7684 promise \u72b6\u6001\u4e3a\u5931\u8d25\u3002"),t.createElement("p",null,"all \u7684\u95ee\u9898\u662f\u6709 promise \u5931\u8d25\u65f6\uff0c\u83b7\u53d6\u4e0d\u5230\u53e6\u5916\u72b6\u6001\u4e3a\u5b8c\u6210\u7684 promise \u503c"),t.createElement(o.Z,{code:"var thenable = {\n  then: (onFulfilled, onRejcted) => {\n    console.log('thenable');\n    onFulfilled(1);\n  },\n};\nvar p2 = new Promise((resolve, reject) => {\n  console.log('p2');\n  reject(2);\n});\nvar p3 = new Promise(resolve => {\n  console.log('p3');\n  setTimeout(() => resolve(3));\n});\nPromise.all([thenable, p2, p3])\n  .then(data => console.log('data', data))\n  .catch(err => console.log('err', err));",lang:"js"}),t.createElement("h3",{id:"race"},t.createElement(r.AnchorLink,{to:"#race","aria-hidden":"true",tabIndex:-1},t.createElement("span",{className:"icon icon-link"})),"race"),t.createElement("p",null,"\u548c all \u7c7b\u4f3c\uff0c\u4efb\u4e00 promise \u5bf9\u8c61\u51b3\u8bae\uff0c\u8fd4\u56de promise \u72b6\u6001\u4e3a\u8be5 promise \u51b3\u8bae\u72b6\u6001"),t.createElement(o.Z,{code:"var p1 = new Promise((resolve, reject) => {\n  console.log('p1');\n  reject(1);\n});\nvar p3 = new Promise(resolve => {\n  console.log('p2');\n  setTimeout(() => resolve(2));\n});\nPromise.all([p1, p2])\n  .then(data => console.log('data', data))\n  .catch(err => console.log('err', err));",lang:"js"}),t.createElement("h3",{id:"allsettled"},t.createElement(r.AnchorLink,{to:"#allsettled","aria-hidden":"true",tabIndex:-1},t.createElement("span",{className:"icon icon-link"})),"allSettled"),t.createElement("p",null,"allSettled \u8fd4\u56de\u7684 promise \u51b3\u8bae\u72b6\u6001\u662f\u7a33\u5b9a\u7684(settled)\u5b8c\u6210\u72b6\u6001\uff0c\u4e0d\u7ba1\u4f20\u5165\u8fed\u4ee3\u5bf9\u8c61\u7684 promise \u6210\u5458\u51b3\u8bae\u662f\u5426\u4e3a\u62d2\u7edd\u90fd\u4e0d\u4f1a\u5f71\u54cd\u8fd4\u56de\u7684 promise \u7684\u5b8c\u6210\u72b6\u6001"),t.createElement("p",null,"\u5bf9\u6bcf\u4e2a\u51b3\u8bae\u7ed3\u679c\u8fdb\u884c\u5c01\u88c5","{","status: 'fulfilled', value","}","\u6216\u8005","{","status: 'rejected', reason","}"),t.createElement(o.Z,{code:"var thenable = {\n  then: (onFulfilled, onRejcted) => {\n    console.log('thenable');\n    throw new Error(111);\n  },\n};\nvar p2 = new Promise((resolve, reject) => {\n  console.log('p2');\n  reject(2);\n});\nvar p3 = new Promise(resolve => {\n  console.log('p3');\n  setTimeout(() => resolve(3));\n});\nPromise.allSettled([thenable, p2, p3])\n  .then(data => console.log('data', data))\n  .catch(err => console.log('err', err));",lang:"js"}),t.createElement("p",null,"\u8f93\u51fa data \u7ed3\u679c\u4e3a\uff1a"),t.createElement(o.Z,{code:'[\n  {\n    "status": "rejected",\n    "reason": {}\n  },\n  {\n    "status": "rejected",\n    "reason": 2\n  },\n  {\n    "status": "fulfilled",\n    "value": 3\n  }\n]',lang:"json"}),t.createElement("p",null,"\u5c3d\u7ba1 thenable \u548c p1 \u7684\u51b3\u8bae\u4e3a\u62d2\u7edd\uff0c\u4f46\u6700\u7ec8\u90fd\u4f1a\u8fdb\u5165 then \u800c\u4e0d catch\uff0c\u4e0e all \u7684\u533a\u522b\u662f allSettled \u5c31\u7b97\u6709 promise \u5931\u8d25\u4e5f\u80fd\u83b7\u53d6\u5230\u6240\u6709 promise \u7684\u7ed3\u679c"),t.createElement("h2",{id:"promisefinally"},t.createElement(r.AnchorLink,{to:"#promisefinally","aria-hidden":"true",tabIndex:-1},t.createElement("span",{className:"icon icon-link"})),"Promise.finally()"),t.createElement("p",null,"\u5f53 promise \u51b3\u8bae\u540e\u4e0d\u7ba1\u5b8c\u6210\u8fd8\u662f\u62d2\u7edd\u90fd\u4f1a\u8c03\u7528 finally \u51fd\u6570\uff0cfinally \u4f1a\u81ea\u52a8\u7528\u4e0a\u5c42 promise \u7684\u7ed3\u679c resolve \u6216\u8005 reject \u7ed9\u4e0b\u5c42\uff0c\u5982\u679c finally \u51fd\u6570\u5185\u5bb9\u6709\u5f02\u5e38\u4f1a\u4ee5\u8be5\u5f02\u5e38 reject"),t.createElement(o.Z,{code:"this.setState({ loading: true });\nrequest('zw.com').finally(() => {\n  this.setState({ loading: false });\n});",lang:"js"}),t.createElement(o.Z,{code:"Promise.reslove(1)\n  .finally(() => 2)\n  .then(n => console.log(n));",lang:"js"}),t.createElement(o.Z,{code:"Promise.reject(1)\n  .finally(() => 2)\n  .catch(n => console.log(n));",lang:"js"}),t.createElement(o.Z,{code:"Promise.reject(1)\n  .finally(() => a.b())\n  .catch(n => console.log(n));",lang:"js"}),t.createElement("h2",{id:"promise-\u548c\u4e8b\u4ef6\u5faa\u73af"},t.createElement(r.AnchorLink,{to:"#promise-\u548c\u4e8b\u4ef6\u5faa\u73af","aria-hidden":"true",tabIndex:-1},t.createElement("span",{className:"icon icon-link"})),"Promise \u548c\u4e8b\u4ef6\u5faa\u73af"),t.createElement("ul",{className:"contains-task-list"},t.createElement("li",{className:"task-list-item"},t.createElement("input",{type:"checkbox",disabled:!0})," \u7528",t.createElement("code",null,"all"),", ",t.createElement("code",null,"race"),"\u5b9e\u73b0",t.createElement("code",null,"none"),",",t.createElement("code",null,"any"),",",t.createElement("code",null,"first"),",",t.createElement("code",null,"last"),",",t.createElement("code",null,"map"))),t.createElement("h2",{id:"\u7ec3\u4e60"},t.createElement(r.AnchorLink,{to:"#\u7ec3\u4e60","aria-hidden":"true",tabIndex:-1},t.createElement("span",{className:"icon icon-link"})),"\u7ec3\u4e60"),t.createElement(o.Z,{code:"async function async1() {\n  console.log('1');\n  await async2();\n  console.log('2');\n  await async3();\n}\nasync function async2() {\n  console.log('3');\n}\nasync function async3() {\n  console.log('4');\n}\n// \u5f00\u59cb\u6267\u884c\nconsole.log('5');\nsetTimeout(function() {\n  console.log('6');\n}, 0);\nasync1();\nnew Promise(function(resolve) {\n  console.log('7');\n  resolve();\n}).then(function() {\n  console.log('8');\n});\nconsole.log('9');",lang:"js"}),t.createElement(o.Z,{code:"new Promise((resolve, reject) => {\n  console.log('1');\n  resolve();\n})\n  .then(() => {\n    console.log('2');\n    new Promise((resolve, reject) => {\n      console.log('3');\n      resolve();\n    })\n      .then(() => {\n        console.log('4');\n      })\n      .then(() => {\n        console.log('5');\n      })\n      .then(() => {\n        console.log('6');\n      })\n      .then(() => {\n        console.log('7');\n      })\n      .then(() => {\n        console.log('8');\n      })\n      .then(() => {\n        console.log('9');\n      });\n    return new Promise((resolve, reject) => {\n      resolve();\n    })\n      .then(() => {\n        console.log('11');\n      })\n      .then(() => {\n        console.log('12');\n      });\n  })\n  .then(() => {\n    console.log('13');\n  });",lang:"js"}),t.createElement(o.Z,{code:"new Promise(resolve => {\n  resolve();\n  Promise.resolve().then(() => console.log(2));\n}).then(() => console.log(4));",lang:"js"}),t.createElement(o.Z,{code:"new Promise(resolve => {\n  resolve();\n  Promise.resolve({\n    then: function(resolve, reject) {\n      console.log(1);\n      resolve();\n    },\n  }).then(() => console.log(2));\n  console.log(0);\n}).then(() => console.log(3));",lang:"js"}),t.createElement("ul",{className:"contains-task-list"},t.createElement("li",{className:"task-list-item"},t.createElement("input",{type:"checkbox",disabled:!0})," \u5d4c\u5957 promise then \u63a8\u5165 microTasks \u7684\u987a\u5e8f\u662f\u81ea\u5df1\u7406\u89e3\u7684\uff0c\u6ca1\u6709\u4ece ECMA \u89c4\u8303\u4e2d\u8bc1\u5b9e")))))}}]);